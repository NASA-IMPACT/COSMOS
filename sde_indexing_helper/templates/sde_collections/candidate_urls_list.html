{% extends "layouts/base.html" %}
{% load static i18n %}
{% load humanize %}
{% block title %}
    {{ collection.name }} Candidate URLs
{% endblock title %}
{% block stylesheets %}
    {{ block.super }}
    <link href="//cdn.datatables.net/v/dt/jszip-2.5.0/dt-1.13.4/af-2.5.3/b-2.3.6/b-colvis-2.3.6/b-html5-2.3.6/b-print-2.3.6/cr-1.6.2/date-1.4.1/fc-4.2.2/fh-3.3.2/kt-2.9.0/r-2.4.1/rg-1.3.1/rr-1.3.3/sc-2.1.1/sb-1.4.2/sp-2.1.2/sl-1.6.2/sr-1.2.2/datatables.min.css"
          rel="stylesheet" />
    <link rel="stylesheet" href="{% static 'css/candidate_url_list.css' %}" />
{% endblock stylesheets %}
{% block javascripts %}
    {{ block.super }}
    <script>var collection_id = "{{ collection.id }}";</script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
    <script src="//cdn.datatables.net/v/dt/jszip-2.5.0/dt-1.13.4/af-2.5.3/b-2.3.6/b-colvis-2.3.6/b-html5-2.3.6/b-print-2.3.6/cr-1.6.2/date-1.4.1/fc-4.2.2/fh-3.3.2/kt-2.9.0/r-2.4.1/rg-1.3.1/rr-1.3.3/sc-2.1.1/sb-1.4.2/sp-2.1.2/sl-1.6.2/sr-1.2.2/datatables.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.blockUI/2.70/jquery.blockUI.min.js"></script>
    <script src="//cdn.datatables.net/plug-ins/1.13.4/pagination/input.js"></script>
    <script src="{% static 'js/candidate_url_list.js' %}"></script>
{% endblock javascripts %}
{% block content %}
    {% csrf_token %}
    <h3>
        {{ candidate_urls.count|intcomma }} Candidate URLs for <a href="{% url 'sde_collections:detail' collection.pk %}"><strong>{{ collection.name }}</strong></a>
        <br>
        <small class="muted">Base URL: <a href="{{ collection.url }}" target="_blank">{{ collection.url }}</a></small>
    </h3>
    <div class="row pull-right">
        <div class="form-group">
            <input type="checkbox" id="filter-checkbox">
            <label for="filter-checkbox">Hide Excluded</label>
        </div>
    </div>
    <br>
    <table class="table" id="candidate_urls_table">
        <thead>
            <tr>
                <th scope="col" class="text-center col-1">URL</th>
                <th scope="col" class="text-center col-1">Exclude</th>
                <th scope="col" class="text-center col-1">Scraped Title</th>
                <th scope="col" class="text-center col-1">New Title</th>
                <th scope="col" class="text-center col-1">Visited?</th>
                <th scope="col" class="text-center col-1">Document Type</th>
                <th scope="col" class="text-center col-1">ID</th>
            </tr>
        </thead>
    </table>
    <hr>
    <h3>
        Exclude Patterns
        <button class="btn btn-primary btn-sm create_exclude_pattern_button">
            <i class="material-icons">add</i>
        </button>
    </h3>
    <table class="table" id="exclude_patterns_table">
        <thead>
            <tr>
                <th scope="col" class="text-center col-1">
                    <strong>Match Pattern</strong>
                </th>
                <th scope="col" class="text-center col-1">
                    <strong>Match Pattern Type</strong>
                </th>
                <th scope="col" class="text-center col-1">
                    <strong>Reason</strong>
                </th>
                <th scope="col" class="text-center col-1">
                    <strong>Affected URLs</strong>
                </th>
                <th scope="col" class="text-center col-1">
                    <strong>Actions</strong>
                </th>
                <th scope="col" class="text-center col-1">
                    <strong>ID</strong>
                </th>
            </tr>
        </thead>
    </table>
    <hr>
    <h3>
        Include Patterns
        <button class="btn btn-primary btn-sm create_include_pattern_button">
            <i class="material-icons">add</i>
        </button>
    </h3>
    <table class="table" id="include_patterns_table">
        <thead>
            <tr>
                <th scope="col" class="text-center col-1">
                    <strong>Match Pattern</strong>
                </th>
                <th scope="col" class="text-center col-1">
                    <strong>Match Pattern Type</strong>
                </th>
                <th scope="col" class="text-center col-1">
                    <strong>Affected URLs</strong>
                </th>
                <th scope="col" class="text-center col-1">
                    <strong>Actions</strong>
                </th>
                <th scope="col" class="text-center col-1">
                    <strong>ID</strong>
                </th>
            </tr>
        </thead>
    </table>
    <hr>
    <h3>
        Title Patterns
        <button class="btn btn-primary btn-sm create_title_pattern_button">
            <i class="material-icons">add</i>
        </button>
    </h3>
    <table class="table" id="title_patterns_table">
        <thead>
            <tr>
                <th scope="col" class="text-center col-1">
                    <strong>Match Pattern</strong>
                </th>
                <th scope="col" class="text-center col-1">
                    <strong>Match Pattern Type</strong>
                </th>
                <th scope="col" class="text-center col-1">
                    <strong>Title Pattern</strong>
                </th>
                <th scope="col" class="text-center col-1">
                    <strong>Affected URLs</strong>
                </th>
                <th scope="col" class="text-center col-1">
                    <strong>Actions</strong>
                </th>
                <th scope="col" class="text-center col-1">
                    <strong>ID</strong>
                </th>
            </tr>
        </thead>
    </table>
    <hr>
    <h3>
        Document Type Patterns
        <button class="btn btn-primary btn-sm create_document_type_pattern_button">
            <i class="material-icons">add</i>
        </button>
    </h3>
    <table class="table" id="document_type_patterns_table">
        <thead>
            <tr>
                <th scope="col" class="text-center col-1">
                    <strong>Match Pattern</strong>
                </th>
                <th scope="col" class="text-center col-1">
                    <strong>Match Pattern Type</strong>
                </th>
                <th scope="col" class="text-center col-1">
                    <strong>Document Type</strong>
                </th>
                <th scope="col" class="text-center col-1">
                    <strong>Affected URLs</strong>
                </th>
                <th scope="col" class="text-center col-1">
                    <strong>Actions</strong>
                </th>
                <th scope="col" class="text-center col-1">
                    <strong>ID</strong>
                </th>
            </tr>
        </thead>
    </table>
    <ul class="custom-menu list-group">
        <li data-action="exclude-pattern" class="list-group-item">Create Exclude Pattern</li>
        <li data-action="include-pattern" class="list-group-item">Create Include Pattern</li>
        <li data-action="title-pattern" class="list-group-item">Create Title Pattern</li>
        <li data-action="document-type-pattern" class="list-group-item">Create Document Type Pattern</li>
    </ul>
    <div class="modal fade"
         id="excludePatternModal"
         data-backdrop="static"
         data-keyboard="false"
         tabindex="-1"
         aria-labelledby="excludePatternModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="excludePatternModalLabel">Exclude Pattern Form</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form id="exclude_pattern_form">
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="match_pattern_input">Match Pattern*</label>
                            <input type="text"
                                   class="form-control"
                                   id="match_pattern_input"
                                   required
                                   name="match_pattern">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
        <div class="modal fade"
         id="includePatternModal"
         data-backdrop="static"
         data-keyboard="false"
         tabindex="-1"
         aria-labelledby="includePatternModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="includePatternModalLabel">Include Pattern Form</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form id="include_pattern_form">
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="match_pattern_input">Match Pattern*</label>
                            <input type="text"
                                   class="form-control"
                                   id="match_pattern_input"
                                   required
                                   name="match_pattern">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="modal fade"
         id="titlePatternModal"
         data-backdrop="static"
         data-keyboard="false"
         tabindex="-1"
         aria-labelledby="titlePatternModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="titlePatternModalLabel">Title Pattern Form</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form id="title_pattern_form">
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="match_pattern_input">Match Pattern*</label>
                            <input type="text"
                                   class="form-control"
                                   id="match_pattern_input"
                                   required
                                   name="match_pattern">
                        </div>
                        <div class="form-group">
                            <label for="title_pattern_input">Title Pattern*</label>
                            <input type="text"
                                   class="form-control"
                                   id="title_pattern_input"
                                   required
                                   name="title_pattern">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="modal fade"
         id="documentTypePatternModal"
         data-backdrop="static"
         data-keyboard="false"
         tabindex="-1"
         aria-labelledby="documentTypePatternModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="documentTypePatternModalLabel">Document Type Pattern Form</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form id="document_type_pattern_form">
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="match_pattern_input">Match Pattern*</label>
                            <input type="text"
                                   class="form-control"
                                   id="match_pattern_input"
                                   required
                                   name="match_pattern">
                        </div>
                        <div class="form-group">
                            <div class="input-group">
                                <input type="hidden"
                                       name="document_type_pattern"
                                       class="form-control"
                                       aria-label="Document Type"
                                       id="doc_type_input_field">
                                <div class="input-group-append">
                                    <button class="btn btn-secondary btn-block dropdown-toggle"
                                            type="button"
                                            data-toggle="dropdown"
                                            aria-haspopup="true"
                                            aria-expanded="false">Select Document Type</button>
                                    <div class="dropdown-menu">
                                        <a class="dropdown-item document_type_form_select" value="1">Images</a>
                                        <a class="dropdown-item document_type_form_select" value="2">Data</a>
                                        <a class="dropdown-item document_type_form_select" value="3">Documentation</a>
                                        <a class="dropdown-item document_type_form_select" value="4">Software and Tools</a>
                                        <a class="dropdown-item document_type_form_select" value="5">Missions and Instruments</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock content %}
